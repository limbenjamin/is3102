<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="../template.xhtml"
                    xmlns="http://www.w3.org/1999/xhtml"
                    xmlns:ui="http://java.sun.com/jsf/facelets"
                    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                    xmlns:pz="http://primefaces.org/ui"
                    >




        <ui:define name="content" id="page"> 

            <style type="text/css">
                legend{
                    font-size:14px !important;
                }
                input,textArea,select{

                    background-color: #fff !important;
                    background-image:none !important;
                    color: #000 !important;
                }

                select{

                    background-color: #fff !important;

                    background-image:none !important;
                }

                table tr{
                    padding:5px !important;
                }
                table tr td{
                    margin: 1px solid black !important;

                }


            </style>
            <div class="col-md-12">
                <ol class="breadcrumb">
                    <li><a href="../dash.xhtml">Home</a></li>
                    <li class="active"><strong>Promotion Manager</strong></li>
                </ol>                        
            </div>
            <br/>
            <br/>
            <h:panelGroup layout="block" id="msg" >
                <p:outputLabel rendered="${marketing.error_msg.length()>0}" style="color:red;font-weight:bold" value="${marketing.error_msg}"/>
                <br/>
                <p:outputLabel rendered="${marketing.success_msg.length()>0}" style="color:green;font-weight:bold"  value="${marketing.success_msg}"/>
            </h:panelGroup>
            <br/>
            <!-- campaign Management-->
            <p:tabView id="panel" dynamic="true" style="">
                <p:tab title="Campaign Management" id="campaign_tab">
                    <p:panel header="Existing Campagins">
                        <p:dataTable var="row" value="#{marketing.promotionCampaigns}">
                            <p:column headerText="Title">
                                <p:inputText value="#{row.title}"/>
                            </p:column>
                            <p:column headerText="Campaign Goals">
                                <h:selectOneMenu id="country" value="#{row.goal}">
                                    <f:selectItems value="${marketing.campaignGoals}"/>
                                </h:selectOneMenu>
                            </p:column>
                            <p:column headerText="Valid From">
                                <p:calendar showOn="button" value="#{row.validFrom}"/>
                            </p:column>
                            <p:column headerText="Valid Until">
                                <p:calendar showOn="button" value="#{row.validUntil}"/>
                            </p:column>
                            <p:column headerText="Country Office">
                                <p:inputText disabled="true"  value="${row.countryOffice.name}"></p:inputText>
                            </p:column>
                            <p:column headerText="Membership Tiers">
                                <h:selectManyCheckbox id="membership" value="#{row.membershipTiers}">
                                    <f:selectItems value="${row.membershipTiers}"></f:selectItems>
                                </h:selectManyCheckbox>
                            </p:column>
                            <p:column headerText="Remark">
                                <p:inputTextarea value="#{row.remark}"></p:inputTextarea>
                            </p:column>
                            <p:column headerText="Active">
                                Yes/No
                            </p:column>
                            <p:column headerText="Terminate">
                                Terminate
                            </p:column>

                        </p:dataTable>
                    </p:panel>
                    <br/>

                    <h:form id="make_new_campaign">
                        <p:fieldset legend="New Campaign" toggleable="true" collapsed="${marketing.newPromotionCampaign.title.length()==0}" toggleSpeed="500" style="font-size:14px">

                            <h:panelGrid columns="2">

                                <p:outputLabel value="Campaign Title:" style="width:250px;margin-right:10px" />
                                <p:inputText value="#{marketing.newPromotionCampaign.title}" style="background-color: #fff;background-image:none;"  ></p:inputText>

                                <p:outputLabel value="Campaign Purpose:" style="width:250px;margin-right:10px" />

                                <h:selectOneMenu id="country" value="#{marketing.newPromotionCampaign.goal}">
                                    <f:selectItems value="${marketing.campaignGoals}"/>
                                </h:selectOneMenu>

                                <p:outputLabel value="Valid From: " style="width:250px;margin-right:10px" />
                                <p:calendar id="button" value="#{marketing.newPromotionCampaign.validFrom.time}" showOn="button"></p:calendar>


                                <p:outputLabel value="Valid Until: " style="width:250px;margin-right:10px" />
                                <p:calendar id="button2" value="#{marketing.newPromotionCampaign.validUntil.time}" showOn="button"></p:calendar>

                                <p:outputLabel value="Country Office: " style="width:250px;margin-right:10px" />
                                <p:inputText disabled="true"  value="${marketing.newPromotionCampaign.countryOffice.name}"></p:inputText>

                                <p:outputLabel value="Applicable Membership Tier" style="width:250px;margin-right:10px" />

                                <h:selectManyCheckbox id="membership" value="#{marketing.newPromotionCampaign.membershipTiers}">
                                    <f:selectItems value="${marketing.membershipTiers}"></f:selectItems>
                                </h:selectManyCheckbox>

                                <p:outputLabel value="Campaign Remark: " style="width:250px;margin-right:10px" />
                                <p:inputTextarea value="#{marketing.newPromotionCampaign.remark}"></p:inputTextarea>



                            </h:panelGrid>
                            <p:commandButton value="Submit" ajax="true" update="@([id$=campaign_tab]),@([id$=msg])" actionListener="${marketing.newpromo}"/>
                        </p:fieldset>
                    </h:form>
                </p:tab>
                <p:tab title="Campaign Analytics" id="campaign_anal"></p:tab>
                <p:tab title="Campaign Marketing" id="campaign_marketing"></p:tab>


            </p:tabView>

        </ui:define>
    </ui:composition>
</html>